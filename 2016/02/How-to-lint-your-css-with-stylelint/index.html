<!DOCTYPE html> <html> <head> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <link rel="dns-prefetch" href="//use.typekit.net"> <link rel="dns-prefetch" href="//connect.facebook.net"> <link rel="dns-prefetch" href="//platform.twitter.com"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>How to lint your Sass/CSS properly with Stylelint &mdash; Creative Nightly</title> <meta name="google-site-verification" content="NIyg5RnuWdhOCZD2mmca13kZl374sKKhRD74XmMO_fM" /> <style>a,article,body,div,em,h2,header,html,img,nav,p,section,span,time{margin:0;padding:0;border:0;font:inherit;vertical-align:baseline}body,p{line-height:2rem}body,h2{color:#494949;font-style:normal}article,header,nav,section{display:block}body,html{height:100%}*,:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box}html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;font-size:75%}body{font-family:ff-tisa-web-pro,Georgia,serif;font-weight:400;font-size:1.33333rem;padding-top:5rem;overflow-x:hidden;background-color:#fcfcfc}.inline-pullout,h2{font-family:source-sans-pro,Helvetica,sans-serif}a{-webkit-transition:color .1s,background-color .1s;transition:color .1s,background-color .1s;text-decoration:none;color:#2077b2}p a{background-image:-webkit-gradient(linear,left top,left bottom,color-stop(50%,transparent),color-stop(0,#709cf9));background-image:-webkit-linear-gradient(top,transparent 50%,#709cf9 0);background-image:linear-gradient(180deg,transparent 50%,#709cf9 0);background-position:0 93%;background-size:100% .15rem;text-shadow:.1rem 0 #fcfcfc,.15rem 0 #fcfcfc,-.1rem 0 #fcfcfc,-.15rem 0 #fcfcfc}hr,p a{background-repeat:repeat-x;-webkit-background-size:100% .15rem}p{-webkit-font-feature-settings:'kern' 1,'onum' 1,'liga' 1;font-feature-settings:'kern' 1,'onum' 1,'liga' 1;margin-bottom:1.54666rem;padding-top:.45334rem}h2{-webkit-font-feature-settings:'dlig' 1,'liga' 1,'lnum' 1,'kern' 1;font-feature-settings:'dlig' 1,'liga' 1,'lnum' 1,'kern' 1;font-weight:700;line-height:3rem;font-size:2.08333rem;margin-bottom:.18749rem;padding-top:.81251rem}@media screen and (min-width:40em){html{font-size:87.5%}body{font-size:1.21429rem}p{margin-bottom:1.49785rem;padding-top:.50215rem}h2{font-size:1.9rem;margin-bottom:.12699rem;padding-top:.87301rem}}@media screen and (min-width:50em){html{font-size:93.75%}body{font-size:1.2rem}p{margin-bottom:1.49199rem;padding-top:.50801rem}h2{font-size:1.87333rem;margin-bottom:.11819rem;padding-top:.88181rem}}@media screen and (min-width:64em){html{font-size:106.25%}body{font-size:1.17647rem}p{margin-bottom:1.48234rem;padding-top:.51766rem}h2{font-size:2.08824rem;margin-bottom:.18911rem;padding-top:.81089rem}}em{font-style:italic}hr{background-image:-webkit-gradient(linear,left top,left bottom,color-stop(50%,transparent),color-stop(0,#eee));background-image:-webkit-linear-gradient(top,transparent 50%,#eee 0);background-image:linear-gradient(180deg,transparent 50%,#eee 0);background-position:0 50%;background-size:100% .15rem;border:0;margin:0 -3%;padding-bottom:2rem;padding-top:2rem}.show-grid{background-image:-webkit-linear-gradient(top,hsla(0,0%,59%,.1) 0,hsla(0,0%,100%,0) 1px);background-image:linear-gradient(180deg,hsla(0,0%,59%,.1) 0,hsla(0,0%,100%,0) 1px);background-repeat:repeat-y;-webkit-background-size:100% 1rem;background-size:100% 1rem}.container:after{content:"";display:table;clear:both}img{-ms-interpolation-mode:bicubic;height:auto;vertical-align:middle;width:100%}@media screen and (min-width:40em){img{margin:0 auto;max-width:100%;width:auto}}.container{margin:0 auto;position:relative;width:94%;max-width:42rem}@media screen and (min-width:40em){.container--2col{max-width:40rem}}@media screen and (min-width:50em){.container--2col{max-width:40rem}}@media screen and (min-width:64em){.container--2col{max-width:48rem;padding-left:8rem}}.shift-down{padding-top:3rem}@media screen and (max-width:720px){.shift-down{padding-top:2rem}}.navigation--primary{height:5rem;display:table-cell;vertical-align:middle}.navigation--primary a{margin:0 .5rem}.navigation--primary a:first-child{margin-left:0;margin-right:1rem}.navigation--primary .follow{position:relative;display:inline-block;width:164px;height:28px;top:8px;margin:0 1rem}.navigation--primary .follow a{display:none}.media-window{position:relative;height:323px;height:19rem;-webkit-background-size:cover;background-size:cover;background-position:center 40%;background-color:#333;overflow:hidden}.media-window__content{text-align:center;height:100%;padding:5rem 0 3rem;background:-webkit-gradient(linear,left top,left bottom,color-stop(35%,transparent),color-stop(35%,rgba(0,0,0,.5)));background:-webkit-linear-gradient(top,transparent 35%,rgba(0,0,0,.5));background:linear-gradient(180deg,transparent 35%,rgba(0,0,0,.5))}.home .media-window__content{background:-webkit-gradient(linear,left top,left bottom,color-stop(0,transparent),color-stop(0,#000));background:-webkit-linear-gradient(top,transparent 0,#000);background:linear-gradient(180deg,transparent 0,#000)}.media-window__brand{max-width:240px}@media screen and (min-width:720px){.home .media-window__content{background:-webkit-gradient(linear,left top,left bottom,color-stop(35%,transparent),color-stop(35%,rgba(0,0,0,.5)));background:-webkit-linear-gradient(top,transparent 35%,rgba(0,0,0,.5));background:linear-gradient(180deg,transparent 35%,rgba(0,0,0,.5))}.media-window__brand{max-width:360px}.media-window--large{height:28rem}}.inline-pullout{font-style:normal;font-weight:400;font-weight:700;font-size:1.06667rem}@media screen and (min-width:40em){.inline-pullout{font-size:.97143rem}}@media screen and (min-width:50em){.inline-pullout{font-size:.96rem}}@media screen and (max-width:63.99em){.inline-pullout{line-height:2rem;margin-bottom:.35199rem;padding-top:.64801rem}}@media screen and (max-width:63.99em) and (min-width:40em){.inline-pullout{margin-bottom:.32056rem;padding-top:.67944rem}}@media screen and (max-width:63.99em) and (min-width:50em){.inline-pullout{margin-bottom:.31679rem;padding-top:.68321rem}}@media screen and (max-width:63.99em) and (min-width:64em){.inline-pullout{margin-bottom:.29117rem;padding-top:.70883rem}}@media screen and (min-width:64em){.inline-pullout{font-size:.88235rem;position:absolute;left:0;margin-top:1rem;top:0}.inline-pullout span{display:block}}.inline-pullout__el{text-transform:uppercase;display:inline-block;line-height:1rem;margin-bottom:-.14801rem;padding-top:.14801rem;letter-spacing:0}@media screen and (min-width:40em){.inline-pullout__el{margin-bottom:-.17944rem;padding-top:.17944rem}}@media screen and (min-width:50em){.inline-pullout__el{margin-bottom:-.18321rem;padding-top:.18321rem}}@media screen and (min-width:64em){.inline-pullout__el{margin-bottom:-.20883rem;padding-top:.20883rem;display:block}.inline-pullout__el--large{font-size:2.33333rem;line-height:2rem;margin-bottom:-.23001rem;padding-top:.23001rem}}@media screen and (min-width:64em) and (min-width:40em){.inline-pullout__el--large{font-size:2.14286rem;margin-bottom:-.29287rem;padding-top:.29287rem}}@media screen and (min-width:64em) and (min-width:50em){.inline-pullout__el--large{font-size:2.13333rem;margin-bottom:-.29601rem;padding-top:.29601rem}}@media screen and (min-width:64em) and (min-width:64em){.inline-pullout__el--large{font-size:2.35294rem;margin-bottom:-.22354rem;padding-top:.22354rem}}.index-item{position:relative}.index-item .inline-pullout{left:-8rem}.masthead{position:fixed;height:5rem;left:0;right:0;top:0;background:#fff;-webkit-box-shadow:0 0 5px 0 rgba(0,0,0,.1);box-shadow:0 0 5px 0 rgba(0,0,0,.1);-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;perspective:1000;-webkit-transition:all .35s ease;transition:all .35s ease;z-index:1}.masthead .container{max-width:none}.brand{font-family:source-sans-pro;font-weight:700;text-transform:uppercase}.is-full-width{width:100%}@media screen and (max-width:600px){.desk,.navigation--primary .follow{display:none}}</style> <script> (function(u){function loadCSS(e,t,n){"use strict";function r(){for(var t,i=0;i<d.length;i++)d[i].href&&d[i].href.indexOf(e)>-1&&(t=!0);t?o.media=n||"all":setTimeout(r)}var o=window.document.createElement("link"),i=t||window.document.getElementsByTagName("script")[0],d=window.document.styleSheets;return o.rel="stylesheet",o.href=e,o.media="only x",i.parentNode.insertBefore(o,i),r(),o}for(var i in u){loadCSS(u[i]);}}(['/assets/css/site.css'])); </script> <noscript> <link rel="stylesheet" type="text/css" href="/assets/css/site.css"> </noscript> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /> <link rel="apple-touch-icon" href="/images/logo.png"/> <link href="/feed.xml" rel="alternate" type="application/rss+xml" title="Creative Nightly" /> <meta name="title" content="How to lint your Sass/CSS properly with Stylelint "> <link rel="canonical" href="http://www.creativenightly.com/2016/02/How-to-lint-your-css-with-stylelint/"> <link rel="author" href="https://plus.google.com/+ScottyVernon"> <meta property="og:title" content="How to lint your Sass/CSS properly with Stylelint "/> <meta property="og:url" content="http://www.creativenightly.com/2016/02/How-to-lint-your-css-with-stylelint/"/> <meta property="og:description" content="What is linting? Why should we lint our stylesheets? Linting helps reduce silly errors in codebases, and improves coding quality by enforcing good coding rules, and practices."/> <meta name="description" content="What is linting? Why should we lint our stylesheets? Linting helps reduce silly errors in codebases, and improves coding quality by enforcing good coding rules, and practices."/> <meta property="og:site_name" content="Creative Nightly"> <!-- Async Typekit --> <script> if( window.innerWidth < 800 ) { document.write('\x3Cscript src="//use.typekit.net/adu5fik.js" onload="try{Typekit.load();}catch(e){}" async>\x3C/script>'); } else { document.write('\x3Cscript src="//use.typekit.net/adu5fik.js">\x3C/script>'); document.write('\x3Cscript>try{Typekit.load();}catch(e){}\x3C/script>'); }; </script> <!-- JEKYLL ENV: production --> </head> <body class="show-grid typeset page page--all page--post"> <header class="site-header masthead"> <div class="container"> <nav class="navigation navigation--horizontal navigation--primary"> <a href="/" class="brand">Creative Nightly</a><!-- --><!--<a href="/">Home</a>--><!-- --><a class="desk" href="/archive/">Archive</a><!-- --><a href="/contact/">About + Contact</a><!-- --><p class="follow"><a href="https://twitter.com/KingScooty" onclick="_gs('event', 'Clicked Follow button')" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @KingScooty</a></p> </nav> </div> </header> <div class="site-body"> <article class="content-block shift-down"> <div class="article"> <div class="container container--2col"> <header class="content-block__header "> <h1 class="title">How to lint your Sass/CSS properly with Stylelint</h1> </header> <div class="inline-pullout"> <time class="date" pubdate datetime="2016-02-12T00:00:00+00:00" title="February 12, 2016"><span class="inline-pullout__el inline-pullout__el--large date__day">12</span> <span class="inline-pullout__el date__month">February</span> <span class="inline-pullout__el date__year">2016<span></time> </div> <section class="content-block__body"> <p>Stylesheet linting. Not many people do it. Many more people should—especially diverse teams that have a lot of hands touching the codebase.</p> <p>In this article I’m going to talk about <em>why</em> we should lint our stylesheets, and <em>how</em> to implement stylesheet linting into our build pipelines for both vanilla CSS and Sass.</p> <!--more--> <p>Table of contents:</p> <ol> <li><a href="#introduction">Introduction</a> <ol> <li><a href="#what-is-linting">What is linting?</a></li> <li><a href="#why-should-we-lint-our-stylesheets">Why should we lint our stylesheets?</a></li> <li><a href="#introducing-stylelint">Introducing Stylelint</a></li> </ol> </li> <li><a href="#setup">Setup</a> <ol> <li><a href="#how-to-lint-your-css">How to lint your CSS</a></li> <li><a href="#how-to-lint-your-sass">How to lint your Sass</a></li> </ol> </li> <li><a href="#extending-stylelint-with-plugins">Extending Stylelint with plugins</a> <ol> <li><a href="#case-study-linting-in-practice">Case study: Linting in practice</a></li> </ol> </li> </ol> <hr /> <h2 id="introduction">Introduction</h2> <h3 id="what-is-linting">What is linting?</h3> <p>Linting is the process of checking the source code for Programmatic as well as Stylistic errors. This is most helpful in identifying some common and uncommon mistakes that are made during coding. They’re essentially a spell checker for programming languages. While linting is useful when working alone, they really pay dividends when working in teams: where many (careless) hands touch the code.</p> <p>A Lint—or a Linter—is a program or tool that supports linting (verifying code quality). They are available for most languages like C, Python, JavaScript, CSS, etc.</p> <h3 id="why-should-we-lint-our-stylesheets">Why should we lint our stylesheets?</h3> <p>There are many reasons to lint stylesheets. It maintains code consistency, it highlights errors in the codebase, it helps reduce unnecessary code, and it also helps prevent lazy coding.</p> <p>Let’s take a look at a couple of examples.</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.no-space-after-colon</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span><span class="nb">block</span><span class="p">;</span>
<span class="p">}</span>           <span class="err">⬆</span>

<span class="nc">.no-semicolon</span> <span class="p">{</span>
    <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span> <span class="err">⬅</span>
<span class="p">}</span>
</code></pre></div> <p>Linters are very good at spotting stylistic issues like these. Setting up stylistic linting rules aren’t essential, but they help keep the code consistent. Also, I don’t know about you, but these 2 stylistic errors above are a pet peeve of mine.</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.invalid-hex</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#FFF00</span><span class="n">G</span><span class="p">;</span>
<span class="p">}</span>                <span class="err">⬆</span>
</code></pre></div> <p>They’re also very good at spotting errors like invalid hex colours, which may have resulted from a type error. Errors like this are capable of breaking important visual styling if not caught.</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.unnecessary-prefixes</span> <span class="p">{</span>
    <span class="nl">-webkit-border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">-moz-border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
    <span class="nl">border-radius</span><span class="p">:</span> <span class="m">5px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div> <p>There are a fair few CSS3 rules that don’t need to be prefixed anymore in order to work. Linting spots these rules and helps to remove unnecessary and deprecated code. Linting prefixes is especially useful when paired with <a href="https://github.com/postcss/autoprefixer" target="\_blank">Autoprefixer</a>—this lets you remove all prefixes, and only insert the ones you require for your target audience.</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.duplicate-rule</span> <span class="p">{</span>
    <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>
    <span class="nl">transition</span><span class="p">:</span> <span class="n">opacity</span> <span class="m">.2s</span><span class="p">;</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#444</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#eee</span><span class="p">;</span>
    <span class="nl">transition</span><span class="p">:</span> <span class="n">background-color</span> <span class="m">.4s</span><span class="p">;</span> <span class="err">⬅</span>
<span class="p">}</span>
</code></pre></div> <p>Duplicate rules are a common form of erroneous code. What if the developer meant for both opacity <em>and</em> background-colour to be transitioned? In the case above, the opacity transition is lost. Linting would highlight this error.</p> <p>Convinced yet? If you’re not, keep reading…</p> <h3 id="introducing-stylelint">Introducing Stylelint</h3> <p><a href="http://stylelint.io/" target="\_blank">Stylelint</a> is a super extendable, and unopinionated CSS linter written in JavaScript. It’s the latest and greatest in CSS linting. It supports the latest CSS syntax, understands <em>CSS-like</em> syntaxes, and is extendable with plugins. What’s more, because it’s powered by JavaScript instead of Ruby, it’s much, <em>much</em> faster than <a href="https://github.com/brigade/scss-lint" target="\_blank">scss-lint</a>.</p> <blockquote> <p>Stylelint is a mighty, modern CSS linter that helps you enforce consistent conventions and avoid errors in your stylesheets.</p> </blockquote> <p>The linter is powered by <a href="https://github.com/postcss/postcss" target="\_blank">PostCSS</a>, so it understands any syntax that PostCSS can parse, including SCSS.</p> <blockquote> <p>PostCSS is a tool for transforming styles with JS plugins. These plugins can lint your CSS, support variables and mixins, transpile future CSS syntax, inline images, and more.</p> </blockquote> <p>The mantra of PostCSS is do one thing, and one thing well; so it’s all about plugins. There’s currently more than 200 plugins available for PostCSS, and because they’re all written in JavaScript, they run <em>rapid fast</em>!</p> <p>PostCSS and Stylelint are what we’ll be using to lint our stylesheets in the next section.</p> <h2 id="setup">Setup</h2> <h3 id="stylelint-config-files">Stylelint config files</h3> <p>The beauty of Stylelint is how unopinionated it is. You build your own ruleset from the ground up, so it can be as opinionated or unopinionated as you choose—you don’t have to spend time disabling rules you don’t want in order to get started.</p> <p>The <a href="https://github.com/stylelint/stylelint/blob/master/docs/user-guide/rules.md" target="\_blank">Stylelint rule documentation</a> is a good primer for getting started. They also provide a <a href="https://github.com/stylelint/stylelint-config-standard/blob/master/index.js" target="\_blank">stylelint standard config file</a> for you to use in your projects that is rather well thought out.</p> <p>For us getting started though, we’re going to use a nice and compact config file that covers the bare essentials. Personally, I think it’s a better starting config than the one Stylelint provide, as it gives you space to build on top of it, rather than having to disable the rules you don’t want.</p> <p>It looks something like this:</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="s2">"rules"</span><span class="err">:</span> <span class="p">{</span>
  <span class="s2">"block-no-empty"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"color-no-invalid-hex"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"declaration-colon-space-after"</span><span class="err">:</span> <span class="s2">"always"</span><span class="p">,</span>
  <span class="s2">"declaration-colon-space-before"</span><span class="err">:</span> <span class="s2">"never"</span><span class="p">,</span>
  <span class="s2">"function-comma-space-after"</span><span class="err">:</span> <span class="s2">"always"</span><span class="p">,</span>
  <span class="s2">"function-url-quotes"</span><span class="err">:</span> <span class="s2">"double"</span><span class="p">,</span>
  <span class="s2">"media-feature-colon-space-after"</span><span class="err">:</span> <span class="s2">"always"</span><span class="p">,</span>
  <span class="s2">"media-feature-colon-space-before"</span><span class="err">:</span> <span class="s2">"never"</span><span class="p">,</span>
  <span class="s2">"media-feature-name-no-vendor-prefix"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"max-empty-lines"</span><span class="err">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="s2">"number-leading-zero"</span><span class="err">:</span> <span class="s2">"never"</span><span class="p">,</span>
  <span class="s2">"number-no-trailing-zeros"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"property-no-vendor-prefix"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"rule-no-duplicate-properties"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"declaration-block-no-single-line"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"rule-trailing-semicolon"</span><span class="err">:</span> <span class="s2">"always"</span><span class="p">,</span>
  <span class="s2">"selector-list-comma-space-before"</span><span class="err">:</span> <span class="s2">"never"</span><span class="p">,</span>
  <span class="s2">"selector-list-comma-newline-after"</span><span class="err">:</span> <span class="s2">"always"</span><span class="p">,</span>
  <span class="s2">"selector-no-id"</span><span class="err">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"string-quotes"</span><span class="err">:</span> <span class="s2">"double"</span><span class="p">,</span>
  <span class="s2">"value-no-vendor-prefix"</span><span class="err">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre></div> <p>I recommend reading through the <a href="https://github.com/stylelint/stylelint/blob/master/docs/user-guide/rules.md" target="\_blank">Stylelint rule documentation</a> and building on this to create your ideal linting configuration. For now, let’s get into setting up our pipeline using these rules.</p> <h3 id="how-to-lint-your-css">How to lint your CSS</h3> <p>Let’s start with linting vanilla CSS stylesheets. You’ll be amazed at how easy it is to setup! The tools you’ll need to install <code class="highlighter-rouge">gulp-postcss</code>, <code class="highlighter-rouge">postcss-reporter</code>, and <code class="highlighter-rouge">stylelint</code>. Let’s do that now.</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install gulp-postcss postcss-reporter stylelint --save-dev
</code></pre></div> <p>And this is the gulpfile to wire it all together:</p> <noscript><pre>400: Invalid request
</pre></noscript> <script src="https://gist.github.com/21d6fc030174cd41b2e4.js"> </script> <p>How easy was that?! I make that 50 lines of code—including linting rules and imports. Make sure to update the source locations to match the ones in your project!</p> <p>What’s even more amazing, is only a single line of code needs to be modified in order to enable Sass support! Let’s cover that now…</p> <h3 id="how-to-lint-your-sass">How to lint your Sass</h3> <p>Linting Sass files is super easy with PostCSS. The only difference between linting CSS and Scss, is you need to make PostCSS understand the <code class="highlighter-rouge">.Scss</code> syntax, and that’s as easy as installing <code class="highlighter-rouge">postcss-scss</code>, and changing one line in the task above.</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install postcss-scss --save-dev
</code></pre></div> <div class="highlighter-rouge"><pre class="highlight"><code>  <span class="c1">//[...]</span>

  <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span>
      <span class="p">[</span><span class="s1">'app/assets/css/**/*.css'</span><span class="p">,</span>
      <span class="s1">'!app/assets/css/vendor/**/*.css'</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">postcss</span><span class="p">(</span><span class="nx">processors</span><span class="p">),</span> <span class="p">{</span><span class="na">syntax</span><span class="p">:</span> <span class="nx">syntax_scss</span><span class="p">});</span> <span class="err">⬅</span>
<span class="p">});</span>
</code></pre></div> <p>Here’s the gulpfile in full for linting Sass files:</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install gulp-postcss postcss-reporter stylelint postcss-scss --save-dev
</code></pre></div> <noscript><pre>400: Invalid request
</pre></noscript> <script src="https://gist.github.com/fa4aab7852dd30feb573.js"> </script> <p>So, <em>so</em> easy! And that’s it! You can now lint both CSS and Sass files!</p> <p>Keep on reading if you want to know about extending Stylelint with plugins, and <em>why</em> you’d want to do that, by going through a case study.</p> <h2 id="extending-stylelint-with-plugins">Extending Stylelint with plugins</h2> <p>Just like PostCSS, Stylelint is extendable via plugins, which is awesome!</p> <p>Let’s run through a quick scenario where linting would help improve code readability, and help kick lazy devs up the butt when they try and hack an easy win into the codebase.</p> <h3 id="case-study-linting-in-practice">Case Study: Linting in practice</h3> <h4 id="the-project-manager-who-likes-to-code">The project manager who likes to code</h4> <p>How about this for a scenario. A project manager is managing a new web app that’s in development, and decides—in order to free up some valuable dev time on the project—to have a go at adding a feature. The feature is to add a box shadow to the hover state of a component, and to also add a hover state to the links of a child component.</p> <p><em>What’s the worst that could happen?</em></p> <blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">project manager: i know enough coding to be dangerous<br /><br />*winks*<br /><br />literally ruins entire codebase</p>&mdash; I Am Devloper (@iamdevloper) <a href="https://twitter.com/iamdevloper/status/696692323703336960">February 8, 2016</a></blockquote> <script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script> <p>Here is the code that the project manager adds to the project:</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.component</span> <span class="err">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="err">;</span>
  <span class="c1">//[...]
</span>
  <span class="k">&amp;</span><span class="nd">:hover</span> <span class="err">{</span> <span class="err">⬅</span>
    <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">5px</span> <span class="m">0px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="o">,</span><span class="m">0</span><span class="mi">.75</span><span class="p">)</span><span class="err">;</span>

    <span class="nc">.component__child</span> <span class="err">{</span> <span class="err">⬅</span>
      <span class="nt">ul</span> <span class="err">{</span> <span class="err">⬅</span>
        <span class="nt">li</span> <span class="err">{</span> <span class="err">⬅</span>
          <span class="nt">a</span> <span class="err">{</span> <span class="err">⬅</span>
            <span class="k">&amp;</span><span class="nd">:hover</span> <span class="err">{</span> <span class="err">⬅</span>
              <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span><span class="err">;</span>
            <span class="err">}</span>
          <span class="err">}</span>
        <span class="err">}</span>
      <span class="err">}</span>
    <span class="err">}</span>
  <span class="err">}</span>
<span class="err">}</span>
</code></pre></div> <p>Yuck!</p> <h4 id="selector-nesting-in-sass-is-bad---use-a-linter">Selector nesting in Sass is bad—use a linter!</h4> <p>Selector nesting is a necessary evil when developing using Sass; it’s really useful when used properly, and a one way trip to <a href="https://css-tricks.com/specifics-on-css-specificity/" target="\_blank">specificity</a> hell if abused. Nesting is normally the result of lazy coding—and lazy coding results in code that is hard to read, and poorly written. The first <code class="highlighter-rouge">&amp;:hover{...}</code> rule could be 10 lines below the parent component definition, making it really hard to decipher what it belongs to. However, more importantly, there nesting here is completely unnecessary.</p> <p>This the CSS that the above rule compiles to:</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.component</span><span class="nd">:hover</span> <span class="nc">.component_child</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="nt">a</span><span class="nd">:hover</span> <span class="p">{}</span>
<span class="c">/* What the heck is this?! */</span>
</code></pre></div> <p>If I worked on a team, and someone contributed something like this to the codebase, I’d be having serious, <em>serious</em> words.</p> <p>The next dev that comes along and wants to override this cascading rule is going to have a tough time. With that in mind, I would advise against using nesting at all costs—unless you know what you’re doing.</p> <p>Lucky for us, there’s a plugin for this! With Stylelint, we can install a plugin aptly named <code class="highlighter-rouge">stylelint-statement-max-nesting-depth</code>, and set a max nesting limit to help swat away any nesting abuse.</p> <div class="highlighter-rouge"><pre class="highlight"><code>npm install stylelint-statement-max-nesting-depth --save-dev
</code></pre></div> <p>And by simply adding the following to the scss-lint task in our gulpfile, it’s wired up:</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s2">"scss-lint"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">stylelintConfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"plugins"</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">"stylelint-statement-max-nesting-depth"</span>
    <span class="p">],</span>
    <span class="s2">"rules"</span><span class="p">:</span> <span class="p">{</span>
      <span class="c1">//[...]</span>
      <span class="s2">"statement-max-nesting-depth"</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">{</span> <span class="na">countAtRules</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}],</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="c1">//[..]</span>
<span class="p">});</span>
</code></pre></div> <p>For teams that know what they’re doing, i’d set the max limit to <strong>3</strong>. <em>(Set it lower for inexperienced teams)</em>.</p> <p>With a max nesting limit set to 3, Stylelint would prompt the project manager to refactor the above code. The project manager goes away, has a little think, and comes back with this:</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.component</span><span class="nd">:hover</span> <span class="err">{</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">5px</span> <span class="m">0px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="mi">.75</span><span class="p">)</span><span class="err">;</span>

  <span class="nc">.component__child</span> <span class="err">{</span>
    <span class="nt">ul</span> <span class="err">{</span>
      <span class="nt">li</span> <span class="err">{</span>
        <span class="nt">a</span><span class="nd">:hover</span> <span class="err">{</span>
          <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span><span class="err">;</span>
        <span class="err">}</span>
      <span class="err">}</span>
    <span class="err">}</span>
  <span class="err">}</span>  
<span class="err">}</span>
</code></pre></div> <p>This refactored version is a little more readable, but still unacceptable. There is still absolutely no need for any of this selector nesting! The linter knows this and forces the project manager to rethink their implementation in order to fix the build.</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.component</span><span class="nd">:hover</span> <span class="err">{</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">5px</span> <span class="m">0px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="mi">.75</span><span class="p">)</span><span class="err">;</span>
<span class="err">}</span>

<span class="nc">.component__child</span> <span class="err">{</span>
  <span class="nt">a</span><span class="nd">:hover</span> <span class="err">{</span>
    <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span><span class="err">;</span>
  <span class="err">}</span>
<span class="err">}</span>  
</code></pre></div> <p>Now they’re getting somewhere! This would now be accepted by the linter, and the build would pass. The code above isn’t bad, but it could always be better! If you wanted to be <em>really</em> strict, you could turn all nesting—excluding <code class="highlighter-rouge">@ rules</code>—off completely. This would really force members of the codebase—including the project manager—to think very carefully about what they’re writing.</p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="nc">.component</span><span class="nd">:hover</span> <span class="err">{</span>
  <span class="nl">box-shadow</span><span class="p">:</span> <span class="m">1px</span> <span class="m">1px</span> <span class="m">5px</span> <span class="m">0px</span> <span class="nf">rgba</span><span class="p">(</span><span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="o">,</span> <span class="m">0</span><span class="mi">.75</span><span class="p">)</span><span class="err">;</span>
<span class="err">}</span>

<span class="nc">.component__link</span><span class="nd">:hover</span> <span class="err">{</span>
  <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">underline</span><span class="err">;</span>
<span class="err">}</span>
</code></pre></div> <p>Lovely! Without the build pipeline linting our stylesheets, and prompting for a refactor, this type of lazy coding would never have been caught, and the codebase would gradually degrade in quality.</p> <p>Hopefully by now I’ve convinced you that linting your stylesheets is a worthwhile investment. Linting is your friend. The investment is cheap, and it protects teams from the technical debt of a poorly written codebase.</p> <p>Now go, my developer and designer friends!</p> <p>Henceforth and lint!</p> </section> </div> </div> <!-- <aside class="content-block__aside"> <hr> <div class="container container--2col"> <div class="social social--horizontal"> <div class="social__button social__twitter"> <a href="https://twitter.com/share" class="twitter-share-button" data-via="KingScooty" data-text="How to lint your Sass/CSS properly with Stylelint" data-related="kingscooty">Tweet</a> </div> <div class="social__button social__facebook"> <div class="fb-like" data-href="http://www.creativenightly.com/2016/02/How-to-lint-your-css-with-stylelint/" data-width="150" data-layout="button_count" data-action="like" data-show-faces="true" data-send="false"></div> </div> <div class="social__button social__google"> <div class="g-plusone" data-size="medium"></div> </div> </div> </div> <hr> </aside> --> <footer class="content-block__footer"> <address class="content-block__author media-object"> <!-- <hr class="dark seperator seperator--tight"> --> <div class="container container--2col"> <a href="http://twitter.com/kingscooty" target="_blank"> <img src="/images/base-images/gravatar.png" alt="Scotty Vernon" class=""> </a> <p>Scotty Vernon is a Creative Developer, and director of <a href="http://wildflame.co.uk" target="_blank">Wildflame Studios</a>. <!--and is based in Manchester, UK.--> <!--He is passionate about creative UI &amp; solving engineering problems on the Web.--> He's worked with the likes of <a href="http://www.bbc.co.uk/sport" target="_blank">BBC Sport</a>, <a href="http://www.bbc.co.uk/rd" target="_blank">BBC R&amp;D</a>, and England cricketer, <a href="http://jamesanderson613.com" target="_blank">James Anderson</a>. <!-- Perfectionist; LFC follower; Massive gamer; Nerd.--> He is never far from twitter, likes German beer, gaming, and occasionally writing in the third person.</p> <!-- <div class="type-p"> Written by <strong><a rel="author" href="https://twitter.com/KingScooty" title="" target="_blank">Scotty Vernon</a></strong> </div> <div class="muted fine-print">Founder, Software Engineer @ Wildflame Studios</div> --> <p class="follow"><a href="https://twitter.com/KingScooty" onclick="_gs('event', 'Clicked Follow button')" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @KingScooty</a></p> </div> <!-- <hr class="dark seperator seperator--tight"> --> </address> </footer> <!-- --> <section class="comments content-block__aside"> <div class="container container--2col"> <div id="disqus_thread"></div> </div> </section> </article> </div> <footer class="site-footer"> <div class="container"> &copy; 2016 <nav class="navigation navigation--horizontal navigation--secondary navigation--spacer"> <a href="/">Creative Nightly</a> &middot; <a target="_blank" href="http://twitter.com/kingscooty">KingScooty</a> &middot; <a target="_blank" href="http://www.wildflame.co.uk/">Wildflame</a> </nav> <!-- <nav class="navigation navigation--horizontal navigation--secondary"> <a href="https://twitter.com/kingscooty" title="Follow on Twitter" target="_blank" class="btn-outline"> <i class="icon icon-twitter black"></i> </a> <a href="/feed.xml" title="RSS Feed" class="btn-outline"> <i class="icon icon-rss black"></i> </a> </nav> --> <!-- <p><small>A Wildflame Studios production.</small></p> --> </div> </footer> <!-- <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> --> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script> <!--google analytics tracking code here--> <script type="text/javascript"> if (window.location.hostname != 'localhost') { !function(g,s,q,r,d){r=g[r]=g[r]||function(){(r.q=r.q||[]).push( arguments)};d=s.createElement(q);q=s.getElementsByTagName(q)[0]; d.src='//d1l6p2sc9645hc.cloudfront.net/tracker.js';q.parentNode. insertBefore(d,q)}(window,document,'script','_gs'); _gs('GSN-238625-J'); _gs('set', 'trackLocal', false); } </script> <script type="text/javascript" src="/assets/js/main.js"></script> </body> </html>
